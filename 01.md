# Create a cluster

![cluster](https://d33wubrfki0l68.cloudfront.net/99d9808dcbf2880a996ed50d308a186b5900cec9/40b94/docs/tutorials/kubernetes-basics/public/images/module_01_cluster.svg)

## Using minikube (Mac)
1. Get minikube version, command:
    ```
    $ minikube version
    ```
    Response:
    ```
    minikube version: v1.5.2
    commit: 792dbf92a1de583fcee76f8791cff12e0c9440ad
    ```
  
2. Start a minikube cluster, command:
    ```
    $ minikube start
    ```
    Response:
    ```
    😄  minikube v1.5.2 on Darwin 10.15.1
    🔥  Creating virtualbox VM (CPUs=2, Memory=2000MB, Disk=20000MB) ...
    🐳  Preparing Kubernetes v1.16.2 on Docker '18.09.9' ...
    🚜  Pulling images ...
    🚀  Launching Kubernetes ...
    ⌛  Waiting for: apiserver
    🏄  Done! kubectl is now configured to use "minikube"
    ```
3. Get cluster version, command:
    ```
    $ kubectl version
    ```
    Response:
    ```
    Client Version: version.Info{Major:"1", Minor:"16", GitVersion:"v1.16.3", GitCommit:"b3cbbae08ec52a7fc73d334838e18d17e8512749", GitTreeState:"clean", BuildDate:"2019-11-14T04:24:29Z", GoVersion:"go1.12.13", Compiler:"gc", Platform:"darwin/amd64"}
    Server Version: version.Info{Major:"1", Minor:"16", GitVersion:"v1.16.2", GitCommit:"c97fe5036ef3df2967d086711e6c0c405941e14b", GitTreeState:"clean", BuildDate:"2019-10-15T19:09:08Z", GoVersion:"go1.12.10", Compiler:"gc", Platform:"linux/amd64"}
    ```
4. Get cluster detail information, command:
    ```
    $ kubectl cluster-info
    ```
    Response:
    ```
    Kubernetes master is running at https://192.168.99.107:8443
    KubeDNS is running at https://192.168.99.107:8443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy

    To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.
    ```
5. View the nodes in the cluster, command:
    ```
    $ kubectl get nodes
    ```
    Response:
    ```
    NAME       STATUS   ROLES    AGE   VERSION
    minikube   Ready    master   18m   v1.16.2
    ```

## Using Ubuntu
1. Install kubernetes:
    ```
    $ sudo apt-get install -y kubelet kubeadm kubectl kubernetes-cni
    ```
2. Pass bridged IPv4 traffic to iptables chains:
    ```
    $ sysctl net.bridge.bridge-nf-call-iptables=1
    ```
3. Create cluster:
    ```
    $ kubeadm init --pod-network-cidr=10.244.0.0/16
    ```
4. Make as non-root user:
    ```
    $ mkdir -p $HOME/.kube
    $ sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
    $ sudo chown $(id -u):$(id -g) $HOME/.kube/config
    ```
5. Reset:
    ```
    $ sudo kubeadm reset
    ```
